description "Check for missing SSL configuration bits and create them if needed"

start on stopped finish

console output

script
    if [ ! -d /var/ssl/trustedcerts ] ; then
        mkdir -p /var/ssl/
        # We're creating a symlink here to the real certificate storage as it's correctly
        # updated on every package upgrade by the update-ca-certificates script.
        ln -sf /etc/ssl/certs /var/ssl/trustedcerts
    fi

    if [ ! -f /var/ssl/serial ] ; then
        mkdir -p /var/ssl/public
        echo '01' > /var/ssl/serial
    fi

    if [ ! -f /var/ssl/index.txt ] ; then
        mkdir -p /var/ssl/certs
        mkdir -p /var/ssl/private
        touch /var/ssl/index.txt
    fi
end script
